(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{3:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,231,23)),Promise.resolve().then(a.bind(a,7017))},7017:(e,t,a)=>{"use strict";a.d(t,{TeacherGate:()=>m});var r,s,n=a(7437),c=a(2265),l=a(1169),i=a(357);let o="dgTeacherAccess",d=(null!==(r=i.env.NEXT_PUBLIC_ENABLE_TEACHER_GATE)&&void 0!==r?r:"true")!=="false",h=(null!==(s=i.env.NEXT_PUBLIC_TEACHER_KEY_HASH)&&void 0!==s?s:"b7ffbd682fd660d866121631a3d3f02d548516c59169fa928cac80567b061fc0").trim();async function p(e){let t=new TextEncoder().encode(e.trim());return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}function m(e){let{children:t}=e,[a,r]=(0,c.useState)("checking"),[s,i]=(0,c.useState)(""),[m,u]=(0,c.useState)(""),x=(0,l.useSearchParams)(),f=(0,c.useMemo)(()=>!d||!h,[]);async function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(u(""),!e.trim()){u("Enter the teacher passphrase.");return}try{if(await p(e)===h){localStorage.setItem(o,JSON.stringify({teacherAccess:!0,ts:Date.now()})),r("open");return}r("denied"),t||u("That passphrase did not match. Try again.")}catch(e){console.error("Teacher gate error",e),u("Could not verify right now. Please try again."),r("denied")}}return((0,c.useEffect)(()=>{if(f||localStorage.getItem(o)){r("open");return}let e="preview"===x.get("teacher"),t=x.get("code");e&&t?g(t,!0):r("locked")},[f,x]),"open"===a)?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("section",{className:"mx-auto w-full max-w-3xl px-4 py-16 sm:px-6 lg:px-8",children:[(0,n.jsx)("span",{className:"tag",children:"Teacher access"}),(0,n.jsx)("h1",{className:"mt-4 font-display text-4xl font-black text-[var(--ink)]",children:"Enter teacher code"}),(0,n.jsx)("p",{className:"mt-4 max-w-2xl text-lg font-semibold text-[var(--ink)]",children:"This keeps facilitation notes and answer keys out of casual student browsing. Ask the program lead for the passphrase."}),(0,n.jsxs)("div",{className:"panel mt-6 max-w-xl p-6",children:[(0,n.jsx)("label",{className:"text-sm font-black uppercase tracking-[0.2em] text-[var(--ink)]",children:"Teacher passphrase"}),(0,n.jsx)("input",{type:"password",className:"mt-3 w-full border-2 border-[var(--ink)] bg-white px-3 py-3 text-base font-semibold text-[var(--ink)] outline-none transition focus:bg-[var(--butter-light)]",placeholder:"Enter code",value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&g(s)},disabled:"checking"===a}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary mt-4",onClick:()=>void g(s),disabled:"checking"===a,children:"checking"===a?"Checking...":"Unlock teacher hub"}),m?(0,n.jsx)("p",{className:"mt-3 text-sm font-black text-[var(--raspberry)]",children:m}):null,"denied"!==a||m?null:(0,n.jsx)("p",{className:"mt-3 text-sm font-black text-[var(--raspberry)]",children:"Incorrect passphrase. Please try again."})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[231,130,215,744],()=>t(3)),_N_E=e.O()}]);